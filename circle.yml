machine:
    node:
        version: 5.5.0

    docker-compose:
        version: 1.5.2

    php:
        version: 7.1.0

    services:
        - docker

    timezone: "America/Denver"

    environment:
        APP_ENV: testing
        APP_KEY: base64:Oc/a3EFM+m5E+UpYajlPqpxVMe0BmhWxAIsEcpq7HJs=
        APP_DEBUG: true
        APP_LOG_LEVEL: debug
        APP_URL: http://localhost

        DB_CONNECTION: mysql
        DB_HOST: 127.0.0.1
        DB_PORT: 3306
        DB_DATABASE: wits
        DB_USERNAME: root
        DB_PASSWORD: root

checkout:
  post:
    - git clone git@github.com:WSUWITTS/WITS.git

dependencies:
    # pre:
    #   - sudo pip install docker-compose
    #   - docker login -u $DOCKER_USER -p $DOCKER_PASS -e $DOCKER_EMAIL

    override:
      - composer install --prefer-source --no-interaction --no-dev
      - npm install

    # post:
    #   - docker-compose up

# database:

# compile:

test:
    override:
        - vendor/bin/phpunit

#deployment:
#     production:
#         branch: [master]
#         commands:
#           - docker push WSUWITTS/WITS:v$CIRCLE_BUILD_NUM
#           - docker push WSUWITTS/WITS:latest

# notify:
#   webhooks:
#     # A list of hashes representing hooks. Only the url field is supported.
#     - url: https://someurl.com/hooks/circle
